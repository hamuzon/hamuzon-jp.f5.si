<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>分数入力 / Fraction Input</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="icon" href="https://home.hamusata.f5.si/icon.svg" type="image/svg+xml" />

  <style>
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      padding: 2rem 1rem;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: #f0f4f8;
      color: #243746;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      user-select: none;
    }

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    h1 {
      font-size: clamp(1.8rem, 6vw, 2.4rem);
      font-weight: 700;
      color: #1a365d;
      margin: 0;
    }

    h2 {
      font-size: 1rem;
      font-weight: 500;
      color: #4169aa;
      margin-top: 0.5rem;
    }

    main {
      width: 100%;
      max-width: 360px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .fraction-display {
      font-weight: 700;
      font-size: clamp(3.5rem, 15vw, 5rem);
      color: #1a2e4a;
      margin-bottom: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 140px;
    }

    .numerator {
      transform: translateY(-0.25em);
      margin-right: 0.05em;
    }

    .denominator {
      transform: translateY(0.25em);
      margin-left: 0.05em;
    }

    .slash {
      color: #4a6fa5;
      font-size: 0.9em;
      margin: 0 0.1em;
    }

    .input-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      width: 100%;
    }

    input[type="text"] {
      flex: 1;
      min-width: 0;
      padding: 0.8rem;
      font-size: 1.4rem;
      border: 3px solid #aaccee;
      border-radius: 16px;
      text-align: center;
      color: #1a2e4a;
      background-color: #e6f0fa;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    input.active {
      border-color: #3f72af;
      background-color: #ffffff;
      box-shadow: 0 0 15px rgba(63, 114, 175, 0.3);
      transform: scale(1.05);
    }

    .numpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
      width: 100%;
      margin-bottom: 2rem;
    }

    .numpad button {
      font-size: 1.7rem;
      font-weight: 700;
      padding: 1.2rem 0;
      border: none;
      border-radius: 18px;
      background: linear-gradient(145deg, #5a82d8, #2d4ca5);
      color: white;
      cursor: pointer;
      box-shadow: 0 5px 0 #1b2d61;
      transition: all 0.1s;
    }

    .numpad button:active {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #1b2d61;
    }

    #clear-button {
      background: #64748b;
      box-shadow: 0 5px 0 #334155;
    }

    #toggle-button {
      background: #0ea5e9;
      box-shadow: 0 5px 0 #0369a1;
    }

    .actions {
      width: 100%;
    }

    .copy-btn {
      width: 100%;
      background: #10b981;
      border: none;
      border-radius: 18px;
      padding: 1.2rem;
      font-weight: 700;
      font-size: 1.3rem;
      color: white;
      cursor: pointer;
      box-shadow: 0 5px 0 #059669;
    }

    .copy-btn:active {
      transform: translateY(3px);
      box-shadow: 0 2px 0 #059669;
    }

    #message {
      margin-top: 1.2rem;
      font-weight: 600;
      min-height: 1.5rem;
      text-align: center;
    }

    @media (max-width: 420px) {
      .numpad {
        gap: 10px;
      }
      .numpad button {
        font-size: 1.4rem;
        padding: 1rem 0;
      }
    }
  </style>
</head>

<body>

  <header>
    <h1>分数入力 / Fraction Input</h1>
    <h2>分子と分母を切り替えて入力してください</h2>
  </header>

  <main>
    <section class="fraction-display" id="fraction-display">
      <span class="numerator" id="numerator-display">⁰</span>
      <span class="slash">⁄</span>
      <span class="denominator" id="denominator-display">₁</span>
    </section>

    <section class="input-row">
      <input type="text" id="numerator-input" placeholder="分子" readonly />
      <input type="text" id="denominator-input" placeholder="分母" readonly />
    </section>

    <section class="numpad">
      <button type="button">1</button>
      <button type="button">2</button>
      <button type="button">3</button>
      <button type="button">4</button>
      <button type="button">5</button>
      <button type="button">6</button>
      <button type="button">7</button>
      <button type="button">8</button>
      <button type="button">9</button>
      <button type="button" id="clear-button">AC</button>
      <button type="button">0</button>
      <button type="button" id="toggle-button">⇅</button>
    </section>

    <section class="actions">
      <button type="button" id="copy-button" class="copy-btn">コピー / Copy</button>
      <div id="message" role="alert" aria-live="assertive"></div>
    </section>
  </main>

  <script>
    const supMap = { '0':'⁰','1':'¹','2':'²','3':'³','4':'⁴','5':'⁵','6':'⁶','7':'⁷','8':'⁸','9':'⁹' };
    const subMap = { '0':'₀','1':'₁','2':'₂','3':'₃','4':'₄','5':'₅','6':'₆','7':'₇','8':'₈','9':'₉' };

    const numIn = document.getElementById('numerator-input');
    const denIn = document.getElementById('denominator-input');
    const numOut = document.getElementById('numerator-display');
    const denOut = document.getElementById('denominator-display');
    const msgBox = document.getElementById('message');
    const btns = document.querySelectorAll('.numpad button');

    let activeIn = numIn;
    numIn.classList.add('active');

    function updateView() {
      const n = numIn.value || '0';
      const d = denIn.value || '1';
      numOut.textContent = n.split('').map(c => supMap[c] || c).join('');
      denOut.textContent = d.split('').map(c => subMap[c] || c).join('');
    }

    function clearAll() {
      numIn.value = '';
      denIn.value = '';
      updateView();
      msgBox.textContent = '';
    }

    function switchFocus(target) {
      activeIn = target;
      numIn.classList.toggle('active', target === numIn);
      denIn.classList.toggle('active', target === denIn);
      msgBox.textContent = '';
    }

    numIn.addEventListener('click', () => switchFocus(numIn));
    denIn.addEventListener('click', () => switchFocus(denIn));

    btns.forEach(btn => {
      btn.addEventListener('click', () => {
        if (btn.id === 'clear-button') {
          clearAll();
          return;
        }

        if (btn.id === 'toggle-button') {
          switchFocus(activeIn === numIn ? denIn : numIn);
          return;
        }

        if (activeIn.value.length < 10) {
          activeIn.value += btn.textContent;
          updateView();
        }
        msgBox.textContent = '';
      });
    });

    document.getElementById('copy-button').addEventListener('click', () => {
      if (!numIn.value || !denIn.value || denIn.value === '0') {
        msgBox.textContent = '数値を入力してください';
        msgBox.style.color = '#d32f2f';
        return;
      }

      const res = numOut.textContent + '⁄' + denOut.textContent;
      navigator.clipboard.writeText(res).then(() => {
        msgBox.textContent = `コピーしました: ${res}`;
        msgBox.style.color = '#10b981';
        setTimeout(() => msgBox.textContent = '', 3000);
      });
    });

    updateView();
  </script>

</body>
</html>
